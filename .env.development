# POC Banking Chatbot - Master Development Environment Configuration
# This file contains environment variables for all microservices
# Copy this to .env in each service directory or use docker-compose

# =============================================================================
# GLOBAL CONFIGURATION
# =============================================================================

NODE_ENV=development
LOG_LEVEL=debug

# JWT Security (shared across all services)
JWT_SECRET=dev-jwt-secret-change-me-in-production-2024
JWT_EXPIRY=24h

# CORS Configuration (shared across all services)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:8080,http://localhost:8081

# Service Discovery Configuration
SERVICE_REGISTRY_TYPE=consul
CONSUL_HOST=localhost
CONSUL_PORT=8500
REDIS_URL=redis://localhost:6379

# =============================================================================
# SERVICE PORTS CONFIGURATION
# =============================================================================

# API Gateway
API_GATEWAY_PORT=3001
API_GATEWAY_URL=http://localhost:3001

# NLP Service  
NLP_SERVICE_PORT=3002
NLP_SERVICE_URL=http://localhost:3002

# NLU Service
NLU_SERVICE_PORT=3003
NLU_SERVICE_URL=http://localhost:3003

# MCP Service
MCP_SERVICE_PORT=3004
MCP_SERVICE_URL=http://localhost:3004

# Banking Service
BANKING_SERVICE_PORT=3005
BANKING_SERVICE_URL=http://localhost:3005

# =============================================================================
# API GATEWAY CONFIGURATION
# =============================================================================

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# Load balancing
LOAD_BALANCER_STRATEGY=round-robin
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Circuit breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60000

# Proxy configuration
PROXY_TIMEOUT=30000
PROXY_RETRY_ATTEMPTS=3
PROXY_RETRY_DELAY=1000

# =============================================================================
# BANKING SERVICE CONFIGURATION
# =============================================================================

# Business rules
DAILY_TRANSFER_LIMIT=10000
MONTHLY_TRANSFER_LIMIT=50000
FRAUD_THRESHOLD_AMOUNT=5000
CARD_DAILY_LIMIT=2000

# Fees
WIRE_TRANSFER_FEE=25.00
INTERNATIONAL_TRANSFER_FEE=45.00
ATM_WITHDRAWAL_FEE=2.50
OVERDRAFT_FEE=35.00
CARD_REPLACEMENT_FEE=10.00

# Database
DATABASE_URL=postgresql://postgres:password@localhost:5432/poc_banking_dev
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_TIMEOUT=5000

# External services
PAYMENT_PROCESSOR_URL=http://localhost:9001
CREDIT_BUREAU_URL=http://localhost:9002
FRAUD_DETECTION_URL=http://localhost:9003

# =============================================================================
# NLP SERVICE CONFIGURATION
# =============================================================================

# NLP processing limits
MAX_TEXT_LENGTH=10000
SENTIMENT_THRESHOLD=0.6
ENTITY_CONFIDENCE_THRESHOLD=0.8
LANGUAGE_DETECTION_THRESHOLD=0.9

# External AI services (use test keys)
OPENAI_API_URL=https://api.openai.com/v1
OPENAI_API_KEY=your-openai-dev-key
HUGGINGFACE_API_URL=https://api-inference.huggingface.co
HUGGINGFACE_API_KEY=your-huggingface-dev-key
GOOGLE_NLP_API_URL=https://language.googleapis.com/v1
GOOGLE_API_KEY=your-google-dev-key

# =============================================================================
# NLU SERVICE CONFIGURATION
# =============================================================================

# Intent detection
INTENT_CONFIDENCE_THRESHOLD=0.7
ENTITY_CONFIDENCE_THRESHOLD=0.8
MAX_QUERY_LENGTH=1000
DEFAULT_LANGUAGE=en
CONTEXT_TIMEOUT=300000

# DialogFlow configuration
GOOGLE_PROJECT_ID=poc-banking-chatbot-dev
GOOGLE_APPLICATION_CREDENTIALS=./config/dialogflow-service-account-dev.json
DIALOGFLOW_LANGUAGE_CODE=en
DIALOGFLOW_SESSION_PATH_PREFIX=projects/poc-banking-chatbot-dev/agent/sessions
DIALOGFLOW_CLIENT_EMAIL=your-service-account@poc-banking-chatbot-dev.iam.gserviceaccount.com

# Model paths
BANKING_INTENT_MODELS_PATH=./models/banking
CUSTOM_ENTITY_MODELS_PATH=./models/entities

# External AI services
RASA_SERVER_URL=http://localhost:5005
SPACY_SERVER_URL=http://localhost:8080

# =============================================================================
# MCP SERVICE CONFIGURATION
# =============================================================================

# WebSocket configuration
WS_PORT=3004
WS_PATH=/ws
WS_HEARTBEAT_INTERVAL=30000
WS_MAX_CONNECTIONS=100
WS_AUTH_REQUIRED=true
WS_RATE_LIMIT_MAX_MESSAGES=1000

# MCP Protocol
MCP_PROTOCOL_VERSION=1.0.0
MCP_MAX_TOOLS=50
MCP_TOOL_TIMEOUT=30000
MCP_MAX_CONTEXT_SIZE=100000

# Tool execution
TOOL_EXECUTION_TIMEOUT=30000
MAX_CONCURRENT_TOOLS=10
TOOL_RETRY_ATTEMPTS=3
TOOL_RETRY_DELAY=1000
TOOL_REGISTRY_PATH=./tools
CUSTOM_TOOLS_PATH=./custom-tools
TOOL_VALIDATION_ENABLED=true

# AI model endpoints
ANTHROPIC_API_URL=https://api.anthropic.com/v1
ANTHROPIC_API_KEY=your-anthropic-dev-key
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
AZURE_OPENAI_API_KEY=your-azure-dev-key
GOOGLE_AI_ENDPOINT=https://generativelanguage.googleapis.com
GOOGLE_AI_API_KEY=your-google-ai-dev-key

# =============================================================================
# SHARED CONFIGURATION
# =============================================================================

# Service registry
SERVICE_VERSION=1.0.0
SERVICE_TIMEOUT=5000

# Caching
CACHE_TTL=300
CACHE_MAX_SIZE=1000

# Logging
LOG_MAX_FILES=5
LOG_MAX_SIZE=10MB

# =============================================================================
# DEVELOPMENT SPECIFIC FLAGS
# =============================================================================

# Enable mocking in development
MOCK_EXTERNAL_SERVICES=true
MOCK_EXTERNAL_NLP_SERVICES=true
MOCK_EXTERNAL_AI_SERVICES=true
MOCK_DIALOGFLOW=true
MOCK_AI_SERVICES=true

# Enable debug logging
DEBUG_REQUESTS=true
DEBUG_RESPONSES=true
DEBUG_PROXY=true
DEBUG_TRANSACTIONS=true
DEBUG_FRAUD_DETECTION=true
DEBUG_NLP_PROCESSING=true
DEBUG_SENTIMENT_ANALYSIS=true
DEBUG_ENTITY_EXTRACTION=true
DEBUG_INTENT_DETECTION=true
DEBUG_DIALOGFLOW_INTEGRATION=true
DEBUG_BANKING_INTENTS=true
DEBUG_MCP_PROTOCOL=true
DEBUG_TOOL_EXECUTION=true
DEBUG_WEBSOCKET_COMMUNICATION=true
DEBUG_AI_MODEL_CALLS=true
ENABLE_TOOL_DEBUGGING=true

# Metrics and monitoring
METRICS_ENABLED=true
METRICS_INTERVAL=60000
TRACING_ENABLED=true
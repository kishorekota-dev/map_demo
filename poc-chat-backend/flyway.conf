# Flyway Configuration for POC Chat Backend
# This configuration file contains settings for Flyway database migrations

# JDBC URL for PostgreSQL connection
flyway.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:poc_banking}

# Database credentials
flyway.user=${DB_USER:postgres}
flyway.password=${DB_PASSWORD:postgres}

# Locations to scan for migrations
flyway.locations=filesystem:migrations

# Schema(s) to manage
flyway.schemas=public

# Table to track migration history
flyway.table=flyway_schema_history_chat

# Baseline settings
flyway.baselineOnMigrate=true
flyway.baselineVersion=0
flyway.baselineDescription=Initial baseline

# Validation settings
flyway.validateOnMigrate=true
flyway.outOfOrder=false

# Clean settings (DISABLE IN PRODUCTION)
flyway.cleanDisabled=${FLYWAY_CLEAN_DISABLED:true}

# Target version (empty = latest)
flyway.target=

# Placeholder settings
flyway.placeholderReplacement=false

# Encoding
flyway.encoding=UTF-8

# SQL migration settings
flyway.sqlMigrationPrefix=V
flyway.sqlMigrationSeparator=__
flyway.sqlMigrationSuffixes=.sql

# Repeatable migration settings
flyway.repeatableSqlMigrationPrefix=R

# Connect retries
flyway.connectRetries=3
flyway.connectRetriesInterval=5

# Logging
flyway.outputQueryResults=true

# Mixed migrations (allows mixing of SQL and Java-based migrations)
flyway.mixed=false
